{"version":3,"sources":["app.js","dailyDirective.js","weatherCtrl.js","weatherService.js"],"names":["angular","module","config","$stateProvider","$urlRouterProvider","state","url","templateUrl","otherwise","directive","restrict","controller","$scope","weatherService","tenDay","getLocation","then","data","loc","getWeather","lat","lon","getForecast","city","a","b","weather","forecast","console","log","service","$http","$q","def","defer","get","response","parsed","resolve","promise","resp","list","date","buildDateArray","toFahren","tempK","Math","round","toCelc","arr","fiveDay","highs","lows","wind","humid","time","i","length","dt_txt","substr","push","main","temp_max","temp_min","speed","humidity","day","DailyInfo","moment","format","max","min","dayOfWeek","high","low"],"mappings":"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","file":"bundle.js","sourcesContent":["angular.module('weatherApp', ['ui.router'])\r\n.config(function ($stateProvider, $urlRouterProvider){\r\n    $stateProvider\r\n        .state( 'home', {\r\n            url: '/',\r\n            templateUrl: '../views/homeTmpl.html'\r\n        })\r\n        .state( 'fiveDay', {\r\n            url: '/fiveDayForecast',\r\n            templateUrl: '../views/fiveDayTmpl.html'\r\n        })\r\n        .state( 'data', {\r\n            url: '/data',\r\n            templateUrl: '../views/data.html'\r\n        });\r\n    \r\n    $urlRouterProvider\r\n        .otherwise('/');\r\n});","angular.module('weatherApp')\r\n.directive('dailyDir', function(){\r\n   return {\r\n      restrict: 'E',\r\n      templateUrl: './views/dailyTmpl.html',\r\n      controller: function($scope){\r\n         \r\n      }\r\n   }\r\n})","angular.module('weatherApp')\r\n.controller('weatherCtrl', function($scope, weatherService){\r\n    \r\n    $scope.tenDay = {};\r\n\r\n    $scope.getLocation = function(){\r\n        weatherService.getLocation()\r\n        .then(function(data){\r\n            $scope.loc = data;\r\n            $scope.getWeather(data.lat, data.lon);\r\n            $scope.getForecast(data.city);\r\n        });\r\n    }\r\n\r\n    $scope.getWeather = function(a, b){\r\n        weatherService.getWeather(a, b)\r\n        .then(function(data){\r\n            $scope.weather = data;\r\n        });\r\n    }\r\n\r\n    $scope.getForecast = function(city){\r\n        weatherService.getForecast(city)\r\n        .then(function(data){\r\n            $scope.forecast = data;\r\n            console.log($scope.forecast);\r\n        });\r\n    }\r\n\r\n    $scope.getLocation();\r\n});","angular.module('weatherApp')\r\n.service('weatherService', function($http, $q){\r\n\r\n    this.getLocation = function(){\r\n        var def = $q.defer();\r\n        $http.get('http://ip-api.com/json')\r\n        .then(function(response){\r\n            var parsed = response.data;\r\n            def.resolve(parsed);\r\n        });\r\n        return def.promise;\r\n    }\r\n\r\n    this.getWeather = function(lat, lon){\r\n        var def = $q.defer();\r\n        $http.get('http://api.openweathermap.org/data/2.5/weather?lat=' + lat + '&lon=' + lon + '&appid=48a8f7e3f9111f2ae148e9d7d078c129')\r\n        .then(function(resp){\r\n            var weather = resp.data;\r\n            def.resolve(weather);\r\n        });\r\n        return def.promise;\r\n    }\r\n\r\n    this.getForecast = function(city){\r\n        var def = $q.defer();\r\n        $http.get('http://api.openweathermap.org/data/2.5/forecast?q='+city+',us&appid=48a8f7e3f9111f2ae148e9d7d078c129')\r\n        .then(function(resp){\r\n            var parsed = resp.data.list;\r\n            console.log(parsed);\r\n            var date = buildDateArray(parsed);\r\n            console.log(date);\r\n            def.resolve(date);\r\n        });\r\n        return def.promise;\r\n    }\r\n\r\n    function toFahren(tempK){\r\n        return Math.round(((tempK * 9/5) - 459.67));\r\n    }\r\n\r\n    function toCelc(tempK){\r\n        return Math.round(tempK-273.15);\r\n    }\r\n\r\n    function buildDateArray(arr){\r\n        var fiveDay = [];\r\n        var date = '';\r\n        var highs = [];\r\n        var lows = [];\r\n        var wind = [];\r\n        var humid = [];\r\n        var time = 0;\r\n        \r\n        for(var i=0;i<arr.length;i++){\r\n            date = arr[i].dt_txt.substr(0, 10);\r\n            time = arr[i].dt_txt.substr(11, 2);\r\n            highs.push(arr[i].main.temp_max);\r\n            lows.push(arr[i].main.temp_min);\r\n            wind.push(arr[i].wind.speed);\r\n            humid.push(arr[i].main.humidity);\r\n            if(time == '21' || i == arr.length-1){\r\n                var day = new DailyInfo(date, moment(date).format('dddd'), \r\n                Math.max(...highs), Math.min(...lows), Math.max(...wind), Math.max(...humid));\r\n                console.log(day);\r\n                fiveDay.push(day);\r\n                date = '';\r\n                highs = [];\r\n                lows = [];\r\n                wind = [];\r\n                humid = [];\r\n            }\r\n        }\r\n        return fiveDay;\r\n    }\r\n\r\n    function DailyInfo(date, dayOfWeek, high, low, wind, humid){\r\n        this.date = date;\r\n        this.dayOfWeek = dayOfWeek;\r\n        this.high = high;\r\n        this.low = low;\r\n        this.wind = wind;\r\n        this.humid = humid;\r\n    }\r\n\r\n});"]}